<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ancient Rome ‚Äì Winter Flashcards</title>

<style>
  :root { color-scheme: dark; }

  body {
    margin: 0;
    padding: 0;
    font-family: "Comic Sans MS", "Segoe UI", system-ui, sans-serif;
    /* Night sky with snowy glow */
    background:
      radial-gradient(circle at top, #3f5d9b 0, #11182c 45%, #050712 100%);
    color: #fdfcff;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .wrapper {
    width: 92vw;
    max-width: 640px;
    text-align: center;
  }

  h1 {
    font-size: 1.4rem;
    margin: 0 0 0.75rem;
    color: #ffe9c4;
    text-shadow: 0 2px 6px rgba(0,0,0,0.8);
  }

  .subtitle {
    font-size: 0.85rem;
    margin-bottom: 0.9rem;
    color: #d4dfff;
    opacity: 0.95;
  }

  .card {
    position: relative;
    background: linear-gradient(145deg, #284066, #1a2844);
    border-radius: 22px;
    border: 3px solid #f7e0a5;
    box-shadow:
      0 18px 40px rgba(0,0,0,0.8),
      0 0 26px rgba(180,220,255,0.65) inset;
    padding: 26px 22px 30px;
    min-height: 180px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform .2s ease, box-shadow .25s ease;
  }

  .card:hover {
    transform: translateY(-3px);
    box-shadow:
      0 22px 52px rgba(0,0,0,0.9),
      0 0 30px rgba(210,240,255,0.8) inset;
  }

  .card-label {
    position: absolute;
    top: 10px;
    left: 16px;
    font-size: 0.75rem;
    letter-spacing: .16em;
    text-transform: uppercase;
    color: #fff3c4;
    opacity: 0.9;
  }

  #cardText {
    font-size: 1.25rem;
    line-height: 1.5;
    color: #ffffff;
  }

  .controls {
    margin-top: 18px;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
  }

  button {
    border: none;
    border-radius: 999px;
    padding: 9px 18px;
    background: #8ed2ff;          /* icy blue */
    color: #021320;
    font-weight: 700;
    font-size: 0.9rem;
    cursor: pointer;
    min-width: 90px;
    box-shadow: 0 3px 0 #3b82b2;
    transition: background .2s, transform .1s, box-shadow .1s;
  }

  button:hover {
    background: #b6e4ff;
    transform: translateY(-2px);
  }

  button:active {
    transform: translateY(0);
    box-shadow: 0 2px 0 #3b82b2;
  }

  #modeBtn, #dontKnowBtn {
    margin-top: 10px;
  }

  #modeBtn {
    background: #ffe6a8;          /* warm cookie color */
    box-shadow: 0 3px 0 #c49739;
    color: #402512;
  }

  #modeBtn:hover {
    background: #ffefc3;
  }

  #dontKnowBtn {
    background: #ff7b7b;          /* peppermint red */
    box-shadow: 0 3px 0 #b33232;
    color: #fff7f7;
  }

  #dontKnowBtn:hover {
    background: #ff9898;
  }

  .meta {
    margin-top: 8px;
    font-size: 0.8rem;
    color: #e3e7ff;
    opacity: 0.95;
  }

  .hint {
    margin-top: 4px;
    font-size: 0.75rem;
    color: #c7cff8;
    opacity: 0.9;
  }
</style>
</head>

<body>
<div class="wrapper">
  <h1>üéÑ Ancient Rome ‚Äì Snowy Study Flashcards ‚ùÑÔ∏è</h1>
  <div class="subtitle">Tap / swipe up‚Äìdown to flip ¬∑ Swipe left / right for previous & next</div>

  <div id="card" class="card">
    <div class="card-label" id="sideLabel">Term</div>
    <div id="cardText"></div>
  </div>

  <div class="controls">
    <button id="prevBtn">Prev</button>
    <button id="flipBtn">Flip</button>
    <button id="nextBtn">Next</button>
    <button id="shuffleBtn">Shuffle</button>
  </div>

  <button id="modeBtn">Mode: Term First</button>
  <button id="dontKnowBtn">I don‚Äôt know üòµ</button>

  <div class="meta" id="metaText"></div>
  <div class="hint">Cards you mark ‚ÄúI don‚Äôt know‚Äù will appear more often when you shuffle.</div>
</div>

<script>
  // --- Card data: term / definition -----------------------------------------
  const cards = [
    // key terms
    { term: "Assembly",
      def: "A group of people that make laws in Ancient Rome." },
    { term: "Republic",
      def: "A kind of government where people elect representatives to rule for them." },
    { term: "Chariot",
      def: "A two-wheeled carriage pulled by horses or other animals." },
    { term: "Citizen",
      def: "A person who belongs to a country and has protections under that country‚Äôs laws." },
    { term: "Plebeians",
      def: "Common people in Ancient Rome with little power." },
    { term: "Patricians",
      def: "Members of Ancient Rome‚Äôs highest social class; wealthy landowners." },
    { term: "Conquer",
      def: "To win control of land and its people by attacking an enemy or fighting a war." },
    { term: "Peninsula",
      def: "A piece of land that sticks out into a body of water and is almost surrounded by water." },
    { term: "Senate",
      def: "The powerful patrician lawmaking group in Ancient Rome‚Äôs Republic." },
    { term: "Senator",
      def: "A member of the Senate, part of the patrician lawmaking group." },
    { term: "Dictator",
      def: "A ruler who has total control over a country." },
    { term: "Consul",
      def: "One of the two most important officials in the Roman Republic, elected each year by citizens." },
    { term: "Forum",
      def: "The central area of Rome where government buildings, temples, and important monuments were built." },

    // important people
    { term: "Romulus and Remus",
      def: "Legendary twin brothers of Rome; the city‚Äôs name is believed to come from Romulus." },
    { term: "Cleopatra",
      def: "Queen of Egypt who helped Marc Antony and interacted with Rome." },
    { term: "Augustus Caesar",
      def: "The first emperor of the Roman Empire." },
    { term: "Julius Caesar",
      def: "A famous Roman general and strong speaker whose victories and public games made him a hero to the people." },

    // punic wars and facts
    { term: "Punic Wars",
      def: "A series of wars where Rome fought against Carthage (the Carthaginians)." },
    { term: "Rome in the Punic Wars",
      def: "In the Punic Wars, Rome defeated Carthage and won all three wars." },
    { term: "Where was Carthage located?",
      def: "Carthage was located in Northern Africa on the Mediterranean coast." },
    { term: "Carthage marched...",
      def: "Across the Alps to fight the Romans in the Second Punic War." },
    { term: "Second Punic War ‚Äì famous march",
      def: "Carthage‚Äôs army, led by Hannibal, crossed the Alps to attack Rome." },
    { term: "Civil war",
      def: "A war between groups of people who live in the same country." },

    // patricians vs plebeians details
    { term: "Patrician lifestyle",
      def: "Lived in larger homes, hired tutors for children, and wore clothing or jewelry that showed their high rank." },
    { term: "Plebeian lifestyle",
      def: "Lived in crowded neighborhoods without plumbing, taught their own children, often had the same jobs as their parents, and wore simpler clothing that showed lower rank." }
  ];

  // --- Weighted practice state (localStorage) -------------------------------
  const STORAGE_KEY = "rome_flash_weights_winter_v1";
  let weights = {};

  try {
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved) weights = JSON.parse(saved);
  } catch (e) {
    weights = {};
  }

  function saveWeights() {
    try {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(weights));
    } catch (e) {
      // ignore storage errors
    }
  }

  function cardId(i) {
    return cards[i].term; // use term as unique id
  }

  function getWeight(i) {
    const w = weights[cardId(i)] || 0;
    return 1 + w; // base weight 1 + extra for ‚Äúdon‚Äôt know‚Äù
  }

  // --- UI state -------------------------------------------------------------
  let index = 0;
  let termFirst = true;     // mode
  let showingFront = true;  // front vs back

  const cardEl = document.getElementById("card");
  const cardTextEl = document.getElementById("cardText");
  const sideLabelEl = document.getElementById("sideLabel");
  const metaTextEl = document.getElementById("metaText");
  const modeBtn = document.getElementById("modeBtn");
  const dontKnowBtn = document.getElementById("dontKnowBtn");

  function renderCard() {
    const card = cards[index];

    if (showingFront) {
      cardTextEl.textContent = termFirst ? card.term : card.def;
      sideLabelEl.textContent = termFirst ? "Term" : "Definition";
    } else {
      cardTextEl.textContent = termFirst ? card.def : card.term;
      sideLabelEl.textContent = termFirst ? "Definition" : "Term";
    }

    const w = weights[cardId(index)] || 0;
    const extra = w ? ` ¬∑ Marked ‚Äúdon‚Äôt know‚Äù ${w} time${w === 1 ? "" : "s"}` : "";
    metaTextEl.textContent = `Card ${index + 1} of ${cards.length}${extra}`;
  }

  function flipCard() {
    showingFront = !showingFront;
    renderCard();
  }

  function nextCard() {
    index = (index + 1) % cards.length;
    showingFront = true;
    renderCard();
  }

  function prevCard() {
    index = (index - 1 + cards.length) % cards.length;
    showingFront = true;
    renderCard();
  }

  // Weighted shuffle
  function shuffleCard() {
    let total = 0;
    for (let i = 0; i < cards.length; i++) {
      total += getWeight(i);
    }
    let r = Math.random() * total;
    for (let i = 0; i < cards.length; i++) {
      r -= getWeight(i);
      if (r <= 0) {
        index = i;
        break;
      }
    }
    showingFront = true;
    renderCard();
  }

  function toggleMode() {
    termFirst = !termFirst;
    showingFront = true;
    modeBtn.textContent = termFirst ? "Mode: Term First" : "Mode: Definition First";
    renderCard();
  }

  function markDontKnow() {
    const id = cardId(index);
    weights[id] = (weights[id] || 0) + 1;
    saveWeights();
    dontKnowBtn.textContent = "Saved! üòµ‚Äçüí´";
    setTimeout(() => { dontKnowBtn.textContent = "I don‚Äôt know üòµ"; }, 700);
    renderCard();
  }

  // --- Event bindings -------------------------------------------------------
  document.getElementById("flipBtn").onclick = flipCard;
  document.getElementById("nextBtn").onclick = nextCard;
  document.getElementById("prevBtn").onclick = prevCard;
  document.getElementById("shuffleBtn").onclick = shuffleCard;
  modeBtn.onclick = toggleMode;
  dontKnowBtn.onclick = markDontKnow;
  cardEl.onclick = flipCard;

  // keyboard
  document.addEventListener("keydown", (e) => {
    if (e.key === "ArrowRight") nextCard();
    else if (e.key === "ArrowLeft") prevCard();
    else if (e.key === " " || e.key === "Enter" || e.key === "ArrowUp" || e.key === "ArrowDown") {
      e.preventDefault();
      flipCard();
    }
  });

  // touch/swipe on card
  let sx = 0, sy = 0;
  cardEl.addEventListener("touchstart", e => {
    const t = e.changedTouches[0];
    sx = t.clientX; sy = t.clientY;
  });

  cardEl.addEventListener("touchend", e => {
    const t = e.changedTouches[0];
    const dx = t.clientX - sx;
    const dy = t.clientY - sy;

    if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > 35) {
      if (dx > 0) prevCard(); else nextCard();
    } else if (Math.abs(dy) > Math.abs(dx) && Math.abs(dy) > 35) {
      flipCard();
    }
  });

  // initial render
  renderCard();
</script>
</body>
</html>
